{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\mdalb\\\\Desktop\\\\dramainteractive\\\\dramainteractive\\\\src\\\\App.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport './App.css';\nimport Message from './Components/Message';\nimport Sender from './Components/Sender';\nimport { Route, Routes } from 'react-router-dom';\nimport { createClient } from '@supabase/supabase-js';\nimport Chat from './pages/Chat.jsx';\nimport Home from './pages/Home.jsx';\nimport Controls from './pages/Control.jsx';\nimport Vote from './pages/Vote.jsx';\nimport Board from './pages/Board.jsx';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst supabaseUrl = \"https://jftaxymlbutkjoacvtbk.supabase.co\";\nconst supabaseKey = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpmdGF4eW1sYnV0a2pvYWN2dGJrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MTM5NjkxOTMsImV4cCI6MjAyOTU0NTE5M30.2aT1UzmiN34aKLNRUXAKwhKfnuwxMoiM3eMkHs1oyZU\";\nconst supabase = createClient(supabaseUrl, supabaseKey);\nfunction App() {\n  _s();\n  const [user, setUser] = useState(null);\n  async function getURL() {\n    const {\n      data,\n      error\n    } = await supabase.from(\"controller\").select('currentURL').limit(1);\n    const url = data[0].currentURL;\n    console.log(\"URL: \" + window.location.href);\n    console.log(\"Supabase: \" + url);\n    if (url !== \"\" && url !== null && !user) {\n      if (url !== window.location.href) {\n        if (!window.location.pathname.toLowerCase().includes(\"#controls\")) {\n          if (!window.location.pathname.toLowerCase().includes(\"#board\")) {\n            window.location.href = url;\n          }\n        }\n      }\n    }\n  }\n  getURL();\n  async function getUser() {\n    try {\n      const {\n        data,\n        error\n      } = await supabase.auth.getUser();\n      if (error) {\n        setUser(null);\n        console.log(\"No user\");\n        throw error;\n      }\n      if (data.user) {\n        setUser(data.user);\n        console.log(data.user);\n      } else {\n        setUser(null);\n        console.log(\"No user\");\n      }\n      if (document.getElementById('signinform')) {\n        document.getElementById('signinform').style.display = 'none';\n        document.getElementById('signout').style.display = 'flex';\n      }\n    } catch (error) {\n      console.error('Error fetching user:', error.message);\n    }\n  }\n  useEffect(() => {\n    getUser();\n  }, []); // Run only on component mount\n\n  useEffect(() => {\n    const urlchanges = supabase.channel('schema-db-changes').on('postgres_changes', {\n      event: '*',\n      schema: 'public'\n    }, payload => {\n      const url = payload.new.currentURL;\n      console.log(\"URL: \" + window.location.href);\n      if (url !== \"\" && url !== null) {\n        if (url !== window.location.href) {\n          if (!window.location.pathname.toLowerCase().includes(\"controls\")) {\n            if (!window.location.pathname.toLowerCase().includes(\"board\")) {\n              console.log(\"URL: \" + url);\n              window.location.href = url;\n            }\n          }\n        }\n      }\n    }).subscribe();\n  });\n  useEffect(() => {\n    if (!user) {\n      // REALTIME LISTENERS\n      const channelA = supabase.channel('show');\n      function messageReceived(payload) {\n        alert(\"Got it\");\n        console.log(payload);\n        const url = payload.payload.url;\n        if (url !== window.location.href) {\n          window.location.href = url;\n        }\n      }\n    }\n  }, [user]); // Run whenever user changes\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(Routes, {\n      children: [/*#__PURE__*/_jsxDEV(Route, {\n        path: \"/\",\n        element: /*#__PURE__*/_jsxDEV(Home, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 34\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/chat\",\n        element: /*#__PURE__*/_jsxDEV(Chat, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 38\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/controls\",\n        element: /*#__PURE__*/_jsxDEV(Controls, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 42\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/vote\",\n        element: /*#__PURE__*/_jsxDEV(Vote, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 38\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/board\",\n        element: /*#__PURE__*/_jsxDEV(Board, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 39\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n}\n_s(App, \"bLHhvMTNhzU2Z1/JEi6mKX5unv0=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","Message","Sender","Route","Routes","createClient","Chat","Home","Controls","Vote","Board","jsxDEV","_jsxDEV","Fragment","_Fragment","supabaseUrl","supabaseKey","supabase","App","_s","user","setUser","getURL","data","error","from","select","limit","url","currentURL","console","log","window","location","href","pathname","toLowerCase","includes","getUser","auth","document","getElementById","style","display","message","urlchanges","channel","on","event","schema","payload","new","subscribe","channelA","messageReceived","alert","children","path","element","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/mdalb/Desktop/dramainteractive/dramainteractive/src/App.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport './App.css';\r\nimport Message from './Components/Message';\r\nimport Sender from './Components/Sender';\r\nimport { Route, Routes } from 'react-router-dom';\r\n\r\nimport { createClient } from '@supabase/supabase-js';\r\nimport Chat from './pages/Chat.jsx';\r\nimport Home from './pages/Home.jsx';\r\nimport Controls from './pages/Control.jsx';\r\nimport Vote from './pages/Vote.jsx';\r\nimport Board from './pages/Board.jsx';\r\n\r\nconst supabaseUrl = \"https://jftaxymlbutkjoacvtbk.supabase.co\";\r\nconst supabaseKey = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpmdGF4eW1sYnV0a2pvYWN2dGJrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MTM5NjkxOTMsImV4cCI6MjAyOTU0NTE5M30.2aT1UzmiN34aKLNRUXAKwhKfnuwxMoiM3eMkHs1oyZU\";\r\nconst supabase = createClient(supabaseUrl, supabaseKey);\r\n\r\nfunction App() {\r\n  const [user, setUser] = useState(null);\r\n\r\n\r\n  async function getURL() {\r\n    const { data, error } = await supabase\r\n      .from(\"controller\")\r\n      .select('currentURL')\r\n      .limit(1)\r\n    const url = data[0].currentURL\r\n    console.log(\"URL: \" + window.location.href)\r\n    console.log(\"Supabase: \" + url)\r\n    if (url !== \"\" && url !== null && !user) {\r\n      if (url !== window.location.href) {\r\n        if (!window.location.pathname.toLowerCase().includes(\"#controls\")) {\r\n          if (!window.location.pathname.toLowerCase().includes(\"#board\")) {\r\n            window.location.href = url\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n  }\r\n  getURL()\r\n\r\n  async function getUser() {\r\n    try {\r\n      const { data, error } = await supabase.auth.getUser();\r\n      if (error) {\r\n        setUser(null);\r\n        console.log(\"No user\");\r\n        throw error;\r\n      }\r\n      if (data.user) {\r\n        setUser(data.user);\r\n        console.log(data.user);\r\n      } else {\r\n        setUser(null);\r\n        console.log(\"No user\");\r\n      }\r\n      if (document.getElementById('signinform')) {\r\n        document.getElementById('signinform').style.display = 'none';\r\n        document.getElementById('signout').style.display = 'flex';\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching user:', error.message);\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    getUser();\r\n  }, []); // Run only on component mount\r\n\r\n  useEffect(() => {\r\n\r\n    const urlchanges = supabase\r\n      .channel('schema-db-changes')\r\n      .on(\r\n        'postgres_changes',\r\n        {\r\n          event: '*',\r\n          schema: 'public',\r\n        },\r\n        (payload) => {\r\n          const url = payload.new.currentURL\r\n          console.log(\"URL: \" + window.location.href)\r\n          if (url !== \"\" && url !== null) {\r\n            if (url !== window.location.href) {\r\n              if (!window.location.pathname.toLowerCase().includes(\"controls\")) {\r\n                if (!window.location.pathname.toLowerCase().includes(\"board\")) {\r\n                  console.log(\"URL: \" + url)\r\n                  window.location.href = url\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n\r\n      )\r\n      .subscribe()\r\n  })\r\n\r\n  useEffect(() => {\r\n    if (!user) {\r\n      // REALTIME LISTENERS\r\n      const channelA = supabase.channel('show');\r\n\r\n      function messageReceived(payload) {\r\n        alert(\"Got it\");\r\n        console.log(payload);\r\n        const url = payload.payload.url;\r\n        if (url !== window.location.href) {\r\n          window.location.href = url\r\n        }\r\n      }\r\n\r\n\r\n    }\r\n  }, [user]); // Run whenever user changes\r\n\r\n  return (\r\n    <>\r\n      <Routes>\r\n        <Route path=\"/\" element={<Home />} />\r\n        <Route path=\"/chat\" element={<Chat />} />\r\n        <Route path=\"/controls\" element={<Controls />} />\r\n        <Route path=\"/vote\" element={<Vote />} />\r\n        <Route path=\"/board\" element={<Board />} />\r\n      </Routes>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default App;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}