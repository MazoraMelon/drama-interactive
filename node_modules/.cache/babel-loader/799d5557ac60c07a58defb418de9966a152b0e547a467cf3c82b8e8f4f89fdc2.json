{"ast":null,"code":"import{useState,useEffect}from'react';import'./App.css';import Message from'./Components/Message';import Sender from'./Components/Sender';import{createClient}from'@supabase/supabase-js';import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";const supabaseUrl=\"https://jftaxymlbutkjoacvtbk.supabase.co\";const supabaseKey=\"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpmdGF4eW1sYnV0a2pvYWN2dGJrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MTM5NjkxOTMsImV4cCI6MjAyOTU0NTE5M30.2aT1UzmiN34aKLNRUXAKwhKfnuwxMoiM3eMkHs1oyZU\";const supabase=createClient(supabaseUrl,supabaseKey);function App(){const[username,setUsername]=useState('Anonymous');const[messages,setMessages]=useState([]);const[audienceChat,setAudienceChat]=useState(false);useEffect(()=>{// Subscribe to real-time inserts\nconst channels=supabase.channel('custom-inserts').on('postgres_changes',{event:'INSERT',schema:'public',table:'messages'},payload=>{const newMessage={message:payload.new.message,sender:payload.new.sender,owner:payload.new.sender===username};setMessages(prevMessages=>[...prevMessages,newMessage]);}).subscribe();const controls=supabase.channel('controller').on('postgres_changes',{event:'INSERT',schema:'public',table:'controls'},payload=>{const canChat=payload.new.audienceChat;setAudienceChat(canChat);}).subscribe();return()=>{// Unsubscribe from channel when component unmounts\nchannels.unsubscribe();};},[username]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h1\",{style:{color:'grey',fontSize:'1.5rem',margin:'5px'},onClick:()=>setUsername(prompt('Enter a username')),children:username}),/*#__PURE__*/_jsx(\"div\",{className:\"Chat\",style:{display:\"flex\",flexDirection:\"column\",alignItems:'flex-start',justifyContent:'flex-start'},children:messages.map((msg,index)=>{return/*#__PURE__*/_jsx(Message,{message:msg.message,sender:msg.sender,owner:msg.sender===username},index);})}),/*#__PURE__*/_jsx(Sender,{username:username,canChat:true})]});}export default App;","map":{"version":3,"names":["useState","useEffect","Message","Sender","createClient","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","supabaseUrl","supabaseKey","supabase","App","username","setUsername","messages","setMessages","audienceChat","setAudienceChat","channels","channel","on","event","schema","table","payload","newMessage","message","new","sender","owner","prevMessages","subscribe","controls","canChat","unsubscribe","children","style","color","fontSize","margin","onClick","prompt","className","display","flexDirection","alignItems","justifyContent","map","msg","index"],"sources":["C:/Users/mdalb/Desktop/dramainteractive/dramainteractive/src/App.jsx"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport './App.css';\nimport Message from './Components/Message';\nimport Sender from './Components/Sender';\n\nimport { createClient } from '@supabase/supabase-js';\n\nconst supabaseUrl = \"https://jftaxymlbutkjoacvtbk.supabase.co\";\nconst supabaseKey = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpmdGF4eW1sYnV0a2pvYWN2dGJrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MTM5NjkxOTMsImV4cCI6MjAyOTU0NTE5M30.2aT1UzmiN34aKLNRUXAKwhKfnuwxMoiM3eMkHs1oyZU\";\nconst supabase = createClient(supabaseUrl, supabaseKey);\n\n\nfunction App() {\n  const [username, setUsername] = useState('Anonymous');\n  const [messages, setMessages] = useState([]);\n  const [audienceChat, setAudienceChat] = useState(false);\n\n  useEffect(() => {\n    // Subscribe to real-time inserts\n    const channels = supabase.channel('custom-inserts')\n      .on(\n        'postgres_changes',\n        { event: 'INSERT', schema: 'public', table: 'messages' },\n        (payload) => {\n          const newMessage = {\n            message: payload.new.message,\n            sender: payload.new.sender,\n            owner: payload.new.sender === username\n          };\n          setMessages(prevMessages => [...prevMessages, newMessage]);\n        }\n      )\n      .subscribe();\n\n    const controls = supabase.channel('controller')\n      .on(\n        'postgres_changes',\n        { event: 'INSERT', schema: 'public', table: 'controls' },\n        (payload) => {\n          const canChat = payload.new.audienceChat;\n          setAudienceChat(canChat);\n        }\n      )\n      .subscribe();\n\n    return () => {\n      // Unsubscribe from channel when component unmounts\n      channels.unsubscribe();\n    };\n  }, [username]);\n\n\n  return (\n    <>\n      <h1 style={{\n        color: 'grey',\n        fontSize: '1.5rem',\n        margin: '5px',\n      }} onClick={() => setUsername(prompt('Enter a username'))}>{username}</h1>\n      <div className=\"Chat\" style={{\n        display: \"flex\",\n        flexDirection: \"column\",\n        alignItems: 'flex-start',\n        justifyContent: 'flex-start',\n      }}>\n        {messages.map((msg, index) => {\n          return (\n            <Message\n              key={index}\n              message={msg.message}\n              sender={msg.sender}\n              owner={msg.sender === username}\n            />\n          );\n        })}\n      </div>\n      <Sender username={username} canChat={true} />\n    </>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}