{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\mdalb\\\\Desktop\\\\dramainteractive\\\\dramainteractive\\\\src\\\\Components\\\\Sender.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport { createClient } from '@supabase/supabase-js';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst supabaseUrl = \"https://jftaxymlbutkjoacvtbk.supabase.co\";\nconst supabaseKey = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpmdGF4eW1sYnV0a2pvYWN2dGJrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MTM5NjkxOTMsImV4cCI6MjAyOTU0NTE5M30.2aT1UzmiN34aKLNRUXAKwhKfnuwxMoiM3eMkHs1oyZU\";\nconst supabase = createClient(supabaseUrl, supabaseKey);\nexport default function Sender(props) {\n  _s();\n  const [canChat, setChattingOn] = useState(false);\n  const [placeholder, setPlaceholder] = useState(\"Audience Chat Disabled\");\n  useEffect(() => {\n    const controller = supabase.channel('chat-channel').on('postgres_changes', {\n      event: 'UPDATE',\n      schema: 'public',\n      table: 'controller'\n    }, payload => {\n      if (payload.new.audienceChat !== null) {\n        const isActor = localStorage.getItem('isActor') === 'true';\n        if (isActor) {\n          setPlaceholder(\"Send A Message as an Actor\");\n          setChattingOn(true);\n        }\n        const canNowChat = payload.new.audienceChat;\n        console.log(canNowChat);\n        if (canNowChat === false && !isActor) {\n          setChattingOn(canNowChat);\n          console.log(\"Audience chat disabled\");\n          setPlaceholder(\"Audience chat disabled\");\n        } else {\n          console.log(\"Audience chat enabled\");\n          setPlaceholder(\"Send a message\");\n        }\n      }\n    }).subscribe();\n  }, []);\n  async function sendMessage(event) {\n    event.preventDefault(); // Prevent default form submission behavior\n    const message = document.getElementById('message').value;\n    if (message === \"\") {\n      return;\n    }\n    document.getElementById('message').value = \"\";\n    const {\n      data,\n      error\n    } = await supabase.from('messages').insert({\n      sender: props.username,\n      message: message\n    });\n    console.log(\"Sending message: \" + message);\n  }\n  async function getChatAllowed() {\n    const {\n      data,\n      error\n    } = await supabase.from(\"controller\").select('audienceChat');\n    const canChat = data[0].audienceChat;\n    console.log(canChat);\n    setChattingOn(canChat);\n    if (canChat === false) {\n      setPlaceholder(\"Audience chat disabled\");\n    } else {\n      setPlaceholder(\"Send a message\");\n    }\n  }\n  getChatAllowed();\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: sendMessage // Call sendMessage when form is submitted\n    ,\n    style: {\n      display: \"flex\",\n      flexDirection: \"row\",\n      flexWrap: \"wrap\",\n      justifyContent: \"center\",\n      width: \"100%\",\n      alignItems: \"flex-end\",\n      alignSelf: \"flex-end\",\n      bottom: \"10px\",\n      position: \"fixed\",\n      marginTop: \"10px\",\n      alignContent: \"center\"\n    },\n    \"aria-disabled\": !canChat,\n    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n      id: \"message\",\n      type: \"text\",\n      placeholder: placeholder,\n      autoComplete: \"off\",\n      style: {\n        padding: \"5px\",\n        borderRadius: \"20px\",\n        border: \"1px solid lightgrey\",\n        width: \"80%\",\n        height: \"1.5rem\",\n        fontSize: \"1rem\",\n        outline: \"none\"\n      },\n      disabled: !canChat\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      type: \"submit\" // Change button type to submit\n      ,\n      style: {\n        marginLeft: \"5px\",\n        padding: \"5px\",\n        backgroundColor: \"#218aff\",\n        color: \"white\",\n        border: \"none\",\n        height: \"2rem\",\n        borderRadius: \"20px\",\n        fontSize: \"1rem\",\n        fontWeight: \"bold\"\n      },\n      children: \"Send\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 75,\n    columnNumber: 9\n  }, this);\n}\n_s(Sender, \"0tWg9hf+bulMYl+rAq1o+GK7bsk=\");\n_c = Sender;\nvar _c;\n$RefreshReg$(_c, \"Sender\");","map":{"version":3,"names":["React","useEffect","useState","createClient","jsxDEV","_jsxDEV","supabaseUrl","supabaseKey","supabase","Sender","props","_s","canChat","setChattingOn","placeholder","setPlaceholder","controller","channel","on","event","schema","table","payload","new","audienceChat","isActor","localStorage","getItem","canNowChat","console","log","subscribe","sendMessage","preventDefault","message","document","getElementById","value","data","error","from","insert","sender","username","getChatAllowed","select","onSubmit","style","display","flexDirection","flexWrap","justifyContent","width","alignItems","alignSelf","bottom","position","marginTop","alignContent","children","id","type","autoComplete","padding","borderRadius","border","height","fontSize","outline","disabled","fileName","_jsxFileName","lineNumber","columnNumber","marginLeft","backgroundColor","color","fontWeight","_c","$RefreshReg$"],"sources":["C:/Users/mdalb/Desktop/dramainteractive/dramainteractive/src/Components/Sender.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { createClient } from '@supabase/supabase-js'\r\n\r\nconst supabaseUrl = \"https://jftaxymlbutkjoacvtbk.supabase.co\";\r\nconst supabaseKey = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpmdGF4eW1sYnV0a2pvYWN2dGJrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MTM5NjkxOTMsImV4cCI6MjAyOTU0NTE5M30.2aT1UzmiN34aKLNRUXAKwhKfnuwxMoiM3eMkHs1oyZU\";\r\nconst supabase = createClient(supabaseUrl, supabaseKey);\r\n\r\nexport default function Sender(props) {\r\n    const [canChat, setChattingOn] = useState(false);\r\n    const [placeholder, setPlaceholder] = useState(\"Audience Chat Disabled\");\r\n\r\n    useEffect(() => {\r\n\r\n\r\n\r\n        const controller = supabase.channel('chat-channel')\r\n            .on(\r\n                'postgres_changes',\r\n                { event: 'UPDATE', schema: 'public', table: 'controller' },\r\n                (payload) => {\r\n                    if (payload.new.audienceChat !== null) {\r\n                        const isActor = localStorage.getItem('isActor') === 'true';\r\n                        if (isActor) {\r\n                            setPlaceholder(\"Send A Message as an Actor\");\r\n                            setChattingOn(true);\r\n                        }\r\n                        const canNowChat = payload.new.audienceChat\r\n                        console.log(canNowChat);\r\n                        if (canNowChat === false && !isActor) {\r\n                            setChattingOn(canNowChat);\r\n                            console.log(\"Audience chat disabled\");\r\n                            setPlaceholder(\"Audience chat disabled\");\r\n                        } else {\r\n                            console.log(\"Audience chat enabled\");\r\n                            setPlaceholder(\"Send a message\");\r\n                        }\r\n                    }\r\n                }\r\n            )\r\n            .subscribe()\r\n\r\n\r\n    }, []);\r\n\r\n    async function sendMessage(event) {\r\n        event.preventDefault(); // Prevent default form submission behavior\r\n        const message = document.getElementById('message').value;\r\n        if (message === \"\") {\r\n            return;\r\n        }\r\n        document.getElementById('message').value = \"\";\r\n        const { data, error } = await supabase\r\n            .from('messages')\r\n            .insert({ sender: props.username, message: message });\r\n        console.log(\"Sending message: \" + message);\r\n    }\r\n\r\n    async function getChatAllowed() {\r\n        const { data, error } = await supabase\r\n            .from(\"controller\")\r\n            .select('audienceChat')\r\n\r\n        const canChat = data[0].audienceChat\r\n        console.log(canChat)\r\n        setChattingOn(canChat)\r\n        if (canChat === false) {\r\n            setPlaceholder(\"Audience chat disabled\")\r\n        } else {\r\n            setPlaceholder(\"Send a message\")\r\n        }\r\n    }\r\n    getChatAllowed();\r\n\r\n    return (\r\n        <form\r\n            onSubmit={sendMessage} // Call sendMessage when form is submitted\r\n            style={{\r\n                display: \"flex\",\r\n                flexDirection: \"row\",\r\n                flexWrap: \"wrap\",\r\n                justifyContent: \"center\",\r\n                width: \"100%\",\r\n                alignItems: \"flex-end\",\r\n                alignSelf: \"flex-end\",\r\n                bottom: \"10px\",\r\n                position: \"fixed\",\r\n                marginTop: \"10px\",\r\n                alignContent: \"center\",\r\n            }}\r\n            aria-disabled={!canChat}\r\n        >\r\n            <input\r\n                id=\"message\"\r\n                type=\"text\"\r\n                placeholder={placeholder}\r\n                autoComplete=\"off\"\r\n                style={{\r\n                    padding: \"5px\",\r\n                    borderRadius: \"20px\",\r\n                    border: \"1px solid lightgrey\",\r\n                    width: \"80%\",\r\n                    height: \"1.5rem\",\r\n                    fontSize: \"1rem\",\r\n                    outline: \"none\",\r\n                }}\r\n                disabled={!canChat}\r\n            />\r\n            <button\r\n                type=\"submit\" // Change button type to submit\r\n                style={{\r\n                    marginLeft: \"5px\",\r\n                    padding: \"5px\",\r\n                    backgroundColor: \"#218aff\",\r\n                    color: \"white\",\r\n                    border: \"none\",\r\n                    height: \"2rem\",\r\n                    borderRadius: \"20px\",\r\n                    fontSize: \"1rem\",\r\n                    fontWeight: \"bold\",\r\n                }}\r\n            >\r\n                Send\r\n            </button>\r\n        </form>\r\n    );\r\n}\r\n\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAClD,SAASC,YAAY,QAAQ,uBAAuB;AAAA,SAAAC,MAAA,IAAAC,OAAA;AAEpD,MAAMC,WAAW,GAAG,0CAA0C;AAC9D,MAAMC,WAAW,GAAG,kNAAkN;AACtO,MAAMC,QAAQ,GAAGL,YAAY,CAACG,WAAW,EAAEC,WAAW,CAAC;AAEvD,eAAe,SAASE,MAAMA,CAACC,KAAK,EAAE;EAAAC,EAAA;EAClC,MAAM,CAACC,OAAO,EAAEC,aAAa,CAAC,GAAGX,QAAQ,CAAC,KAAK,CAAC;EAChD,MAAM,CAACY,WAAW,EAAEC,cAAc,CAAC,GAAGb,QAAQ,CAAC,wBAAwB,CAAC;EAExED,SAAS,CAAC,MAAM;IAIZ,MAAMe,UAAU,GAAGR,QAAQ,CAACS,OAAO,CAAC,cAAc,CAAC,CAC9CC,EAAE,CACC,kBAAkB,EAClB;MAAEC,KAAK,EAAE,QAAQ;MAAEC,MAAM,EAAE,QAAQ;MAAEC,KAAK,EAAE;IAAa,CAAC,EACzDC,OAAO,IAAK;MACT,IAAIA,OAAO,CAACC,GAAG,CAACC,YAAY,KAAK,IAAI,EAAE;QACnC,MAAMC,OAAO,GAAGC,YAAY,CAACC,OAAO,CAAC,SAAS,CAAC,KAAK,MAAM;QAC1D,IAAIF,OAAO,EAAE;UACTV,cAAc,CAAC,4BAA4B,CAAC;UAC5CF,aAAa,CAAC,IAAI,CAAC;QACvB;QACA,MAAMe,UAAU,GAAGN,OAAO,CAACC,GAAG,CAACC,YAAY;QAC3CK,OAAO,CAACC,GAAG,CAACF,UAAU,CAAC;QACvB,IAAIA,UAAU,KAAK,KAAK,IAAI,CAACH,OAAO,EAAE;UAClCZ,aAAa,CAACe,UAAU,CAAC;UACzBC,OAAO,CAACC,GAAG,CAAC,wBAAwB,CAAC;UACrCf,cAAc,CAAC,wBAAwB,CAAC;QAC5C,CAAC,MAAM;UACHc,OAAO,CAACC,GAAG,CAAC,uBAAuB,CAAC;UACpCf,cAAc,CAAC,gBAAgB,CAAC;QACpC;MACJ;IACJ,CACJ,CAAC,CACAgB,SAAS,CAAC,CAAC;EAGpB,CAAC,EAAE,EAAE,CAAC;EAEN,eAAeC,WAAWA,CAACb,KAAK,EAAE;IAC9BA,KAAK,CAACc,cAAc,CAAC,CAAC,CAAC,CAAC;IACxB,MAAMC,OAAO,GAAGC,QAAQ,CAACC,cAAc,CAAC,SAAS,CAAC,CAACC,KAAK;IACxD,IAAIH,OAAO,KAAK,EAAE,EAAE;MAChB;IACJ;IACAC,QAAQ,CAACC,cAAc,CAAC,SAAS,CAAC,CAACC,KAAK,GAAG,EAAE;IAC7C,MAAM;MAAEC,IAAI;MAAEC;IAAM,CAAC,GAAG,MAAM/B,QAAQ,CACjCgC,IAAI,CAAC,UAAU,CAAC,CAChBC,MAAM,CAAC;MAAEC,MAAM,EAAEhC,KAAK,CAACiC,QAAQ;MAAET,OAAO,EAAEA;IAAQ,CAAC,CAAC;IACzDL,OAAO,CAACC,GAAG,CAAC,mBAAmB,GAAGI,OAAO,CAAC;EAC9C;EAEA,eAAeU,cAAcA,CAAA,EAAG;IAC5B,MAAM;MAAEN,IAAI;MAAEC;IAAM,CAAC,GAAG,MAAM/B,QAAQ,CACjCgC,IAAI,CAAC,YAAY,CAAC,CAClBK,MAAM,CAAC,cAAc,CAAC;IAE3B,MAAMjC,OAAO,GAAG0B,IAAI,CAAC,CAAC,CAAC,CAACd,YAAY;IACpCK,OAAO,CAACC,GAAG,CAAClB,OAAO,CAAC;IACpBC,aAAa,CAACD,OAAO,CAAC;IACtB,IAAIA,OAAO,KAAK,KAAK,EAAE;MACnBG,cAAc,CAAC,wBAAwB,CAAC;IAC5C,CAAC,MAAM;MACHA,cAAc,CAAC,gBAAgB,CAAC;IACpC;EACJ;EACA6B,cAAc,CAAC,CAAC;EAEhB,oBACIvC,OAAA;IACIyC,QAAQ,EAAEd,WAAY,CAAC;IAAA;IACvBe,KAAK,EAAE;MACHC,OAAO,EAAE,MAAM;MACfC,aAAa,EAAE,KAAK;MACpBC,QAAQ,EAAE,MAAM;MAChBC,cAAc,EAAE,QAAQ;MACxBC,KAAK,EAAE,MAAM;MACbC,UAAU,EAAE,UAAU;MACtBC,SAAS,EAAE,UAAU;MACrBC,MAAM,EAAE,MAAM;MACdC,QAAQ,EAAE,OAAO;MACjBC,SAAS,EAAE,MAAM;MACjBC,YAAY,EAAE;IAClB,CAAE;IACF,iBAAe,CAAC9C,OAAQ;IAAA+C,QAAA,gBAExBtD,OAAA;MACIuD,EAAE,EAAC,SAAS;MACZC,IAAI,EAAC,MAAM;MACX/C,WAAW,EAAEA,WAAY;MACzBgD,YAAY,EAAC,KAAK;MAClBf,KAAK,EAAE;QACHgB,OAAO,EAAE,KAAK;QACdC,YAAY,EAAE,MAAM;QACpBC,MAAM,EAAE,qBAAqB;QAC7Bb,KAAK,EAAE,KAAK;QACZc,MAAM,EAAE,QAAQ;QAChBC,QAAQ,EAAE,MAAM;QAChBC,OAAO,EAAE;MACb,CAAE;MACFC,QAAQ,EAAE,CAACzD;IAAQ;MAAA0D,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACtB,CAAC,eACFpE,OAAA;MACIwD,IAAI,EAAC,QAAQ,CAAC;MAAA;MACdd,KAAK,EAAE;QACH2B,UAAU,EAAE,KAAK;QACjBX,OAAO,EAAE,KAAK;QACdY,eAAe,EAAE,SAAS;QAC1BC,KAAK,EAAE,OAAO;QACdX,MAAM,EAAE,MAAM;QACdC,MAAM,EAAE,MAAM;QACdF,YAAY,EAAE,MAAM;QACpBG,QAAQ,EAAE,MAAM;QAChBU,UAAU,EAAE;MAChB,CAAE;MAAAlB,QAAA,EACL;IAED;MAAAW,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAQ,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACP,CAAC;AAEf;AAAC9D,EAAA,CAtHuBF,MAAM;AAAAqE,EAAA,GAANrE,MAAM;AAAA,IAAAqE,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}